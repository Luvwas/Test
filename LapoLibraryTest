local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local TextService = game:GetService("TextService")

local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ¨ THEME SYSTEM - 6 PRE-CONFIGURED PREMIUM THEMES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Themes = {
    Dark = {
        -- Backgrounds (5 variations)
        BgPrimary = Color3.fromRGB(10, 14, 26),
        BgSecondary = Color3.fromRGB(15, 20, 35),
        BgTertiary = Color3.fromRGB(20, 26, 42),
        BgElevated = Color3.fromRGB(25, 32, 50),
        BgModal = Color3.fromRGB(12, 17, 30),

        -- Text (3 variations)
        TextPrimary = Color3.fromRGB(245, 248, 255),
        TextSecondary = Color3.fromRGB(180, 190, 210),
        TextMuted = Color3.fromRGB(120, 130, 150),

        -- Accents
        Primary = Color3.fromRGB(88, 101, 242),
        Secondary = Color3.fromRGB(67, 181, 129),
        Success = Color3.fromRGB(67, 181, 129),
        Warning = Color3.fromRGB(250, 166, 26),
        Danger = Color3.fromRGB(237, 66, 69),
        Info = Color3.fromRGB(0, 168, 232),

        -- Borders & Strokes
        Border = Color3.fromRGB(40, 50, 70),
        BorderSubtle = Color3.fromRGB(30, 38, 55),
        Divider = Color3.fromRGB(35, 43, 60),

        -- Overlays
        Overlay = Color3.fromRGB(0, 0, 0),
        Shadow = Color3.fromRGB(0, 0, 0),
        Glow = Color3.fromRGB(88, 101, 242),

        -- Layout
        CornerRadius = UDim.new(0, 8),
        Padding = 12,
        Spacing = 8,
        FontSizes = {Title = 16, Body = 14, Small = 12}
    },

    Light = {
        BgPrimary = Color3.fromRGB(255, 255, 255),
        BgSecondary = Color3.fromRGB(246, 248, 250),
        BgTertiary = Color3.fromRGB(237, 240, 245),
        BgElevated = Color3.fromRGB(255, 255, 255),
        BgModal = Color3.fromRGB(250, 251, 253),

        TextPrimary = Color3.fromRGB(20, 25, 35),
        TextSecondary = Color3.fromRGB(80, 90, 110),
        TextMuted = Color3.fromRGB(140, 150, 170),

        Primary = Color3.fromRGB(88, 101, 242),
        Secondary = Color3.fromRGB(67, 181, 129),
        Success = Color3.fromRGB(67, 181, 129),
        Warning = Color3.fromRGB(250, 166, 26),
        Danger = Color3.fromRGB(237, 66, 69),
        Info = Color3.fromRGB(0, 168, 232),

        Border = Color3.fromRGB(220, 225, 235),
        BorderSubtle = Color3.fromRGB(235, 238, 245),
        Divider = Color3.fromRGB(225, 230, 240),

        Overlay = Color3.fromRGB(0, 0, 0),
        Shadow = Color3.fromRGB(0, 0, 0),
        Glow = Color3.fromRGB(88, 101, 242),

        CornerRadius = UDim.new(0, 8),
        Padding = 12,
        Spacing = 8,
        FontSizes = {Title = 16, Body = 14, Small = 12}
    },

    Midnight = {
        BgPrimary = Color3.fromRGB(0, 0, 0),
        BgSecondary = Color3.fromRGB(10, 8, 15),
        BgTertiary = Color3.fromRGB(18, 15, 25),
        BgElevated = Color3.fromRGB(25, 20, 35),
        BgModal = Color3.fromRGB(5, 5, 10),

        TextPrimary = Color3.fromRGB(255, 255, 255),
        TextSecondary = Color3.fromRGB(200, 195, 220),
        TextMuted = Color3.fromRGB(150, 145, 170),

        Primary = Color3.fromRGB(138, 43, 226),
        Secondary = Color3.fromRGB(186, 85, 211),
        Success = Color3.fromRGB(138, 43, 226),
        Warning = Color3.fromRGB(255, 140, 0),
        Danger = Color3.fromRGB(220, 20, 60),
        Info = Color3.fromRGB(138, 43, 226),

        Border = Color3.fromRGB(75, 50, 100),
        BorderSubtle = Color3.fromRGB(50, 35, 70),
        Divider = Color3.fromRGB(60, 45, 85),

        Overlay = Color3.fromRGB(0, 0, 0),
        Shadow = Color3.fromRGB(138, 43, 226),
        Glow = Color3.fromRGB(138, 43, 226),

        CornerRadius = UDim.new(0, 10),
        Padding = 14,
        Spacing = 10,
        FontSizes = {Title = 17, Body = 14, Small = 12}
    },

    Neon = {
        BgPrimary = Color3.fromRGB(5, 5, 10),
        BgSecondary = Color3.fromRGB(10, 10, 15),
        BgTertiary = Color3.fromRGB(15, 15, 20),
        BgElevated = Color3.fromRGB(20, 20, 28),
        BgModal = Color3.fromRGB(8, 8, 12),

        TextPrimary = Color3.fromRGB(0, 255, 255),
        TextSecondary = Color3.fromRGB(255, 0, 255),
        TextMuted = Color3.fromRGB(180, 180, 200),

        Primary = Color3.fromRGB(0, 255, 255),
        Secondary = Color3.fromRGB(255, 0, 255),
        Success = Color3.fromRGB(57, 255, 20),
        Warning = Color3.fromRGB(255, 255, 0),
        Danger = Color3.fromRGB(255, 0, 100),
        Info = Color3.fromRGB(0, 255, 255),

        Border = Color3.fromRGB(0, 255, 255),
        BorderSubtle = Color3.fromRGB(0, 150, 150),
        Divider = Color3.fromRGB(255, 0, 255),

        Overlay = Color3.fromRGB(0, 0, 0),
        Shadow = Color3.fromRGB(0, 255, 255),
        Glow = Color3.fromRGB(0, 255, 255),

        CornerRadius = UDim.new(0, 6),
        Padding = 12,
        Spacing = 8,
        FontSizes = {Title = 16, Body = 14, Small = 11}
    },

    Ocean = {
        BgPrimary = Color3.fromRGB(12, 35, 55),
        BgSecondary = Color3.fromRGB(18, 45, 68),
        BgTertiary = Color3.fromRGB(25, 55, 82),
        BgElevated = Color3.fromRGB(32, 65, 95),
        BgModal = Color3.fromRGB(15, 40, 62),

        TextPrimary = Color3.fromRGB(230, 245, 255),
        TextSecondary = Color3.fromRGB(180, 215, 235),
        TextMuted = Color3.fromRGB(140, 180, 205),

        Primary = Color3.fromRGB(64, 224, 208),
        Secondary = Color3.fromRGB(72, 209, 204),
        Success = Color3.fromRGB(46, 204, 113),
        Warning = Color3.fromRGB(241, 196, 15),
        Danger = Color3.fromRGB(231, 76, 60),
        Info = Color3.fromRGB(52, 152, 219),

        Border = Color3.fromRGB(64, 224, 208),
        BorderSubtle = Color3.fromRGB(45, 140, 145),
        Divider = Color3.fromRGB(55, 180, 175),

        Overlay = Color3.fromRGB(12, 35, 55),
        Shadow = Color3.fromRGB(0, 40, 60),
        Glow = Color3.fromRGB(64, 224, 208),

        CornerRadius = UDim.new(0, 10),
        Padding = 14,
        Spacing = 10,
        FontSizes = {Title = 17, Body = 14, Small = 12}
    },

    Sunset = {
        BgPrimary = Color3.fromRGB(25, 15, 30),
        BgSecondary = Color3.fromRGB(35, 20, 40),
        BgTertiary = Color3.fromRGB(45, 25, 50),
        BgElevated = Color3.fromRGB(55, 30, 60),
        BgModal = Color3.fromRGB(30, 18, 35),

        TextPrimary = Color3.fromRGB(255, 240, 230),
        TextSecondary = Color3.fromRGB(255, 200, 180),
        TextMuted = Color3.fromRGB(200, 160, 150),

        Primary = Color3.fromRGB(255, 107, 107),
        Secondary = Color3.fromRGB(255, 159, 64),
        Success = Color3.fromRGB(72, 219, 251),
        Warning = Color3.fromRGB(253, 203, 110),
        Danger = Color3.fromRGB(232, 67, 147),
        Info = Color3.fromRGB(162, 155, 254),

        Border = Color3.fromRGB(255, 107, 107),
        BorderSubtle = Color3.fromRGB(150, 70, 70),
        Divider = Color3.fromRGB(200, 90, 90),

        Overlay = Color3.fromRGB(25, 15, 30),
        Shadow = Color3.fromRGB(100, 30, 50),
        Glow = Color3.fromRGB(255, 107, 107),

        CornerRadius = UDim.new(0, 12),
        Padding = 14,
        Spacing = 10,
        FontSizes = {Title = 18, Body = 15, Small = 12}
    },

    Cyberpunk = {
        BgPrimary = Color3.fromRGB(15, 0, 25),
        BgSecondary = Color3.fromRGB(25, 5, 35),
        BgTertiary = Color3.fromRGB(35, 10, 45),
        BgElevated = Color3.fromRGB(45, 15, 55),
        BgModal = Color3.fromRGB(20, 3, 30),

        TextPrimary = Color3.fromRGB(255, 242, 0),
        TextSecondary = Color3.fromRGB(255, 20, 147),
        TextMuted = Color3.fromRGB(180, 180, 200),

        Primary = Color3.fromRGB(255, 20, 147),
        Secondary = Color3.fromRGB(255, 242, 0),
        Success = Color3.fromRGB(0, 255, 159),
        Warning = Color3.fromRGB(255, 165, 0),
        Danger = Color3.fromRGB(255, 0, 0),
        Info = Color3.fromRGB(0, 191, 255),

        Border = Color3.fromRGB(255, 20, 147),
        BorderSubtle = Color3.fromRGB(150, 10, 90),
        Divider = Color3.fromRGB(200, 15, 120),

        Overlay = Color3.fromRGB(15, 0, 25),
        Shadow = Color3.fromRGB(255, 20, 147),
        Glow = Color3.fromRGB(255, 20, 147),

        CornerRadius = UDim.new(0, 4),
        Padding = 12,
        Spacing = 8,
        FontSizes = {Title = 16, Body = 14, Small = 11}
    }
}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ› ï¸ UTILITY FUNCTIONS & HELPERS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Utility = {}

function Utility:Tween(instance, properties, duration, easingStyle, easingDirection, callback)
    duration = duration or 0.3
    easingStyle = easingStyle or Enum.EasingStyle.Quint
    easingDirection = easingDirection or Enum.EasingDirection.Out

    local tweenInfo = TweenInfo.new(duration, easingStyle, easingDirection)
    local tween = TweenService:Create(instance, tweenInfo, properties)

    if callback then
        tween.Completed:Connect(callback)
    end

    tween:Play()
    return tween
end

function Utility:Create(className, properties)
    local instance = Instance.new(className)
    for property, value in pairs(properties) do
        if property ~= "Parent" then
            pcall(function()
                instance[property] = value
            end)
        end
    end
    if properties.Parent then
        instance.Parent = properties.Parent
    end
    return instance
end

function Utility:RippleEffect(button, color)
    local ripple = Utility:Create("Frame", {
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = color or Color3.fromRGB(255, 255, 255),
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 10,
        Parent = button
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = ripple
    })

    Utility:Tween(ripple, {
        Size = UDim2.new(2, 0, 2, 0),
        BackgroundTransparency = 1
    }, 0.6, Enum.EasingStyle.Quart, Enum.EasingDirection.Out, function()
        ripple:Destroy()
    end)
end

function Utility:AddStroke(parent, color, thickness, transparency)
    return Utility:Create("UIStroke", {
        Color = color or Color3.fromRGB(255, 255, 255),
        Thickness = thickness or 1,
        Transparency = transparency or 0.5,
        ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
        Parent = parent
    })
end

function Utility:AddShadow(parent, color, size, transparency)
    local shadow = Utility:Create("ImageLabel", {
        Name = "Shadow",
        Size = UDim2.new(1, size * 2, 1, size * 2),
        Position = UDim2.new(0.5, 0, 0.5, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundTransparency = 1,
        Image = "rbxassetid://5554236805",
        ImageColor3 = color or Color3.fromRGB(0, 0, 0),
        ImageTransparency = transparency or 0.7,
        ScaleType = Enum.ScaleType.Slice,
        SliceCenter = Rect.new(23, 23, 277, 277),
        ZIndex = parent.ZIndex - 1,
        Parent = parent
    })
    return shadow
end

function Utility:AddGradient(parent, colorSequence, rotation)
    return Utility:Create("UIGradient", {
        Color = colorSequence,
        Rotation = rotation or 0,
        Parent = parent
    })
end

function Utility:Debounce(func, wait)
    local debounceTimer
    return function(...)
        local args = {...}
        if debounceTimer then
            debounceTimer:Disconnect()
        end
        debounceTimer = RunService.Heartbeat:Connect(function()
            task.wait(wait)
            func(unpack(args))
            if debounceTimer then
                debounceTimer:Disconnect()
            end
        end)
    end
end

function Utility:MakeDraggable(gui, dragArea)
    local dragging, dragInput, dragStart, startPos

    dragArea = dragArea or gui

    local function update(input)
        local delta = input.Position - dragStart
        Utility:Tween(gui, {
            Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        }, 0.1, Enum.EasingStyle.Linear)
    end

    dragArea.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = gui.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    dragArea.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
end

function Utility:SaveConfig(fileName, data)
    local success, _ = pcall(function()
        if not isfolder then return end
        if not isfolder("LapoLibrary") then
            makefolder("LapoLibrary")
        end
        writefile("LapoLibrary/" .. fileName .. ".json", HttpService:JSONEncode(data))
    end)
    return success
end

function Utility:LoadConfig(fileName)
    local success, result = pcall(function()
        if not isfile then return nil end
        if isfile("LapoLibrary/" .. fileName .. ".json") then
            return HttpService:JSONDecode(readfile("LapoLibrary/" .. fileName .. ".json"))
        end
        return nil
    end)
    return success and result or nil
end

function Utility:GetTextSize(text, fontSize, font, frameSize)
    local textSize = TextService:GetTextSize(text, fontSize, font, frameSize)
    return textSize
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“š MAIN LIBRARY
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Library = {}
Library.__index = Library
Library.Version = "2.5.0"
Library.Flags = {}
Library.ThemeCallbacks = {}
Library.VisibilityCallbacks = {}

function Library:CreateWindow(config)
    local self = setmetatable({}, Library)

    self.Name = config.Name or "Lapo Library"
    self.Size = config.Size or UDim2.new(0, 580, 0, 460)
    self.Position = config.Position or UDim2.new(0.5, 0, 0.5, 0)
    self.ThemeName = config.Theme or "Dark"
    self.Theme = Themes[self.ThemeName] or Themes.Dark
    self.Draggable = config.Draggable ~= false
    self.ToggleKey = config.ToggleKey or Enum.KeyCode.RightShift
    self.ConfigFile = config.ConfigFile or "DefaultConfig"

    self.Tabs = {}
    self.CurrentTab = nil
    self.Visible = true
    self.Elements = {}
    self.Notifications = {}

    -- Destroy existing UI with same name (CoreGui ou PlayerGui)
    local screenGui = CoreGui:FindFirstChild("LapoLibrary_Window")
    if not screenGui and LocalPlayer:FindFirstChild("PlayerGui") then
        screenGui = LocalPlayer.PlayerGui:FindFirstChild("LapoLibrary_Window")
    end
    if screenGui then
        screenGui:Destroy()
    end

    self:_BuildUI()
    self:_SetupKeybind()

    return self
end

function Library:_BuildUI()
    local theme = self.Theme

    self.ScreenGui = Utility:Create("ScreenGui", {
        Name = "LapoLibrary_Window",
        ResetOnSpawn = false,
        ZIndexBehavior = Enum.ZIndexBehavior.Global,
        Parent = RunService:IsStudio() and LocalPlayer:WaitForChild("PlayerGui") or CoreGui
    })

    self.BlurOverlay = Utility:Create("Frame", {
        Name = "BlurOverlay",
        Size = UDim2.new(1, 0, 1, 0),
        BackgroundColor3 = theme.Overlay,
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Visible = false,
        ZIndex = 5,
        Parent = self.ScreenGui
    })

    self.MainFrame = Utility:Create("Frame", {
        Name = "MainFrame",
        Size = self.Size,
        Position = self.Position,
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = theme.BgPrimary,
        BorderSizePixel = 0,
        ClipsDescendants = true,
        ZIndex = 1,
        Parent = self.ScreenGui
    })

    Utility:Create("UICorner", {
        CornerRadius = theme.CornerRadius,
        Parent = self.MainFrame
    })

    Utility:AddStroke(self.MainFrame, theme.Border, 1, 0.8)
    Utility:AddShadow(self.MainFrame, theme.Shadow, 20, 0.5)

    Utility:AddGradient(self.MainFrame, ColorSequence.new{
        ColorSequenceKeypoint.new(0, theme.BgPrimary),
        ColorSequenceKeypoint.new(1, theme.BgSecondary)
    }, 180)

    self.Topbar = Utility:Create("Frame", {
        Name = "Topbar",
        Size = UDim2.new(1, 0, 0, 45),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        ZIndex = 2,
        Parent = self.MainFrame
    })

    Utility:Create("UICorner", {
        CornerRadius = theme.CornerRadius,
        Parent = self.Topbar
    })

    Utility:AddStroke(self.Topbar, theme.BorderSubtle, 1, 0.9)

    self.TitleLabel = Utility:Create("TextLabel", {
        Name = "Title",
        Size = UDim2.new(1, -100, 1, 0),
        Position = UDim2.new(0, 15, 0, 0),
        BackgroundTransparency = 1,
        Text = self.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Title,
        Font = Enum.Font.GothamBold,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 3,
        Parent = self.Topbar
    })

    self.CloseButton = Utility:Create("TextButton", {
        Name = "CloseButton",
        Size = UDim2.new(0, 35, 0, 35),
        Position = UDim2.new(1, -40, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundColor3 = theme.Danger,
        BackgroundTransparency = 0.9,
        BorderSizePixel = 0,
        Text = "Ã—",
        TextColor3 = theme.TextPrimary,
        TextSize = 20,
        Font = Enum.Font.GothamBold,
        ZIndex = 3,
        Parent = self.Topbar
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = self.CloseButton
    })

    self.CloseButton.MouseButton1Click:Connect(function()
        self:Toggle()
    end)

    self.CloseButton.MouseEnter:Connect(function()
        Utility:Tween(self.CloseButton, {BackgroundTransparency = 0.5}, 0.2)
        Utility:Tween(self.CloseButton, {Size = UDim2.new(0, 38, 0, 38)}, 0.2, Enum.EasingStyle.Back)
    end)

    self.CloseButton.MouseLeave:Connect(function()
        Utility:Tween(self.CloseButton, {BackgroundTransparency = 0.9}, 0.2)
        Utility:Tween(self.CloseButton, {Size = UDim2.new(0, 35, 0, 35)}, 0.2, Enum.EasingStyle.Quint)
    end)

    self.TabContainer = Utility:Create("ScrollingFrame", {
        Name = "TabContainer",
        Size = UDim2.new(0, 150, 1, -55),
        Position = UDim2.new(0, 10, 0, 50),
        BackgroundColor3 = theme.BgSecondary,
        BorderSizePixel = 0,
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = theme.Primary,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        ZIndex = 2,
        Parent = self.MainFrame
    })

    Utility:Create("UICorner", {
        CornerRadius = theme.CornerRadius,
        Parent = self.TabContainer
    })

    Utility:Create("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 5),
        Parent = self.TabContainer
    })

    Utility:Create("UIPadding", {
        PaddingTop = UDim.new(0, 8),
        PaddingBottom = UDim.new(0, 8),
        PaddingLeft = UDim.new(0, 8),
        PaddingRight = UDim.new(0, 8),
        Parent = self.TabContainer
    })

    self.ContentContainer = Utility:Create("Frame", {
        Name = "ContentContainer",
        Size = UDim2.new(1, -180, 1, -55),
        Position = UDim2.new(0, 170, 0, 50),
        BackgroundTransparency = 1,
        ZIndex = 2,
        Parent = self.MainFrame
    })

    if self.Draggable then
        Utility:MakeDraggable(self.MainFrame, self.Topbar)
    end
end

function Library:_SetupKeybind()
    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if not gameProcessed and input.KeyCode == self.ToggleKey then
            self:Toggle()
        end
    end)
end

function Library:Toggle()
    self.Visible = not self.Visible

    if self.Visible then
        self.MainFrame.Visible = true
        Utility:Tween(self.MainFrame, {Size = self.Size}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
    else
        Utility:Tween(self.MainFrame, {Size = UDim2.new(0, 0, 0, 0)}, 0.3, Enum.EasingStyle.Back, Enum.EasingDirection.In, function()
            self.MainFrame.Visible = false
        end)
    end

    for _, callback in pairs(self.VisibilityCallbacks) do
        pcall(callback, self.Visible)
    end
end

function Library:SetTheme(themeName)
    if not Themes[themeName] then return end

    self.ThemeName = themeName
    self.Theme = Themes[themeName]

    self:_UpdateTheme()

    for _, callback in pairs(self.ThemeCallbacks) do
        pcall(callback, themeName, self.Theme)
    end
end

function Library:_UpdateTheme()
    local theme = self.Theme

    self.MainFrame.BackgroundColor3 = theme.BgPrimary
    self.Topbar.BackgroundColor3 = theme.BgElevated
    self.TitleLabel.TextColor3 = theme.TextPrimary
    self.TabContainer.BackgroundColor3 = theme.BgSecondary

    for _, tab in pairs(self.Tabs) do
        if tab.UpdateTheme then
            tab:UpdateTheme(theme)
        end
    end
end

function Library:RegisterTheme(name, themeData)
    Themes[name] = themeData
end

function Library:GetCurrentTheme()
    return self.ThemeName, self.Theme
end

function Library:OnThemeChange(callback)
    table.insert(self.ThemeCallbacks, callback)
end

function Library:OnVisibilityChange(callback)
    table.insert(self.VisibilityCallbacks, callback)
end

function Library:SaveConfig(fileName)
    local config = {}

    for flag, value in pairs(Library.Flags) do
        config[flag] = value
    end

    config._theme = self.ThemeName

    return Utility:SaveConfig(fileName or self.ConfigFile, config)
end

function Library:LoadConfig(fileName)
    local config = Utility:LoadConfig(fileName or self.ConfigFile)

    if config then
        for flag, value in pairs(config) do
            if flag == "_theme" then
                self:SetTheme(value)
            elseif Library.Flags[flag] ~= nil then
                Library.Flags[flag] = value
                if self.Elements[flag] and self.Elements[flag].SetValue then
                    self.Elements[flag]:SetValue(value)
                end
            end
        end
        return true
    end
    return false
end

function Library:Notify(config)
    local theme = self.Theme
    local notifConfig = {
        Title = config.Title or "Notification",
        Content = config.Content or "",
        Duration = config.Duration or 3,
        Type = config.Type or "Info"
    }

    local notif = Utility:Create("Frame", {
        Name = "Notification",
        Size = UDim2.new(0, 300, 0, 0),
        Position = UDim2.new(1, -320, 1, -20),
        AnchorPoint = Vector2.new(0, 1),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        ClipsDescendants = true,
        ZIndex = 10,
        Parent = self.ScreenGui
    })

    Utility:Create("UICorner", {
        CornerRadius = theme.CornerRadius,
        Parent = notif
    })

    local accentColor = theme[notifConfig.Type] or theme.Info
    Utility:AddStroke(notif, accentColor, 2, 0.5)
    Utility:AddShadow(notif, theme.Shadow, 15, 0.6)

    local title = Utility:Create("TextLabel", {
        Name = "Title",
        Size = UDim2.new(1, -20, 0, 20),
        Position = UDim2.new(0, 10, 0, 10),
        BackgroundTransparency = 1,
        Text = notifConfig.Title,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.GothamBold,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 11,
        Parent = notif
    })

    local content = Utility:Create("TextLabel", {
        Name = "Content",
        Size = UDim2.new(1, -20, 0, 0),
        Position = UDim2.new(0, 10, 0, 35),
        AutomaticSize = Enum.AutomaticSize.Y,
        BackgroundTransparency = 1,
        Text = notifConfig.Content,
        TextColor3 = theme.TextSecondary,
        TextSize = theme.FontSizes.Small,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true,
        ZIndex = 11,
        Parent = notif
    })

    local totalHeight = 50 + content.TextBounds.Y

    Utility:Tween(notif, {
        Size = UDim2.new(0, 300, 0, totalHeight)
    }, 0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out)

    task.delay(notifConfig.Duration, function()
        Utility:Tween(notif, {
            Position = UDim2.new(1, 0, 1, -20)
        }, 0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.In, function()
            notif:Destroy()
        end)
    end)

    table.insert(self.Notifications, notif)
end

function Library:Destroy()
    if self.ScreenGui then
        self.ScreenGui:Destroy()
    end
    Library.Flags = {}
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“‘ TAB SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:CreateTab(config)
    local theme = self.Theme
    local tab = {
        Name = config.Name or "Tab",
        Icon = config.Icon,
        Sections = {},
        Elements = {}
    }

    tab.Button = Utility:Create("TextButton", {
        Name = "TabButton_" .. tab.Name,
        Size = UDim2.new(1, -16, 0, 35),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.3,
        BorderSizePixel = 0,
        Text = "",
        AutoButtonColor = false,
        ZIndex = 3,
        Parent = self.TabContainer
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = tab.Button
    })

    tab.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -40, 1, 0),
        Position = UDim2.new(0, 35, 0, 0),
        BackgroundTransparency = 1,
        Text = tab.Name,
        TextColor3 = theme.TextSecondary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.GothamMedium,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 4,
        Parent = tab.Button
    })

    if tab.Icon then
        tab.IconImage = Utility:Create("ImageLabel", {
            Name = "Icon",
            Size = UDim2.new(0, 20, 0, 20),
            Position = UDim2.new(0, 8, 0.5, 0),
            AnchorPoint = Vector2.new(0, 0.5),
            BackgroundTransparency = 1,
            Image = tab.Icon,
            ImageColor3 = theme.TextSecondary,
            ZIndex = 4,
            Parent = tab.Button
        })
    end

    tab.Container = Utility:Create("ScrollingFrame", {
        Name = "TabContent_" .. tab.Name,
        Size = UDim2.new(1, -20, 1, -10),
        Position = UDim2.new(0, 10, 0, 5),
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = theme.Primary,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        Visible = false,
        ZIndex = 3,
        Parent = self.ContentContainer
    })

    Utility:Create("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 10),
        Parent = tab.Container
    })

    tab.Button.MouseButton1Click:Connect(function()
        self:SelectTab(tab)
        Utility:RippleEffect(tab.Button, theme.Primary)
    end)

    tab.Button.MouseEnter:Connect(function()
        if self.CurrentTab ~= tab then
            Utility:Tween(tab.Button, {BackgroundTransparency = 0}, 0.2)
            Utility:Tween(tab.Label, {TextColor3 = theme.TextPrimary}, 0.2)
            if tab.IconImage then
                Utility:Tween(tab.IconImage, {ImageColor3 = theme.TextPrimary}, 0.2)
            end
        end
    end)

    tab.Button.MouseLeave:Connect(function()
        if self.CurrentTab ~= tab then
            Utility:Tween(tab.Button, {BackgroundTransparency = 0.3}, 0.2)
            Utility:Tween(tab.Label, {TextColor3 = theme.TextSecondary}, 0.2)
            if tab.IconImage then
                Utility:Tween(tab.IconImage, {ImageColor3 = theme.TextSecondary}, 0.2)
            end
        end
    end)

    function tab:UpdateTheme(newTheme)
        tab.Button.BackgroundColor3 = newTheme.BgTertiary
        tab.Label.TextColor3 = (self.CurrentTab == tab) and newTheme.TextPrimary or newTheme.TextSecondary
        if tab.IconImage then
            tab.IconImage.ImageColor3 = (self.CurrentTab == tab) and newTheme.TextPrimary or newTheme.TextSecondary
        end
    end

    table.insert(self.Tabs, tab)

    if #self.Tabs == 1 then
        self:SelectTab(tab)
    end

    tab.CreateSection = function(_, name)
        return self:_CreateSection(tab, name)
    end

    return tab
end

function Library:SelectTab(tab)
    if self.CurrentTab then
        self.CurrentTab.Container.Visible = false
        Utility:Tween(self.CurrentTab.Button, {BackgroundTransparency = 0.3}, 0.2)
        Utility:Tween(self.CurrentTab.Label, {TextColor3 = self.Theme.TextSecondary}, 0.2)
        if self.CurrentTab.IconImage then
            Utility:Tween(self.CurrentTab.IconImage, {ImageColor3 = self.Theme.TextSecondary}, 0.2)
        end
    end

    self.CurrentTab = tab
    tab.Container.Visible = true
    Utility:Tween(tab.Button, {BackgroundTransparency = 0}, 0.2)
    Utility:Tween(tab.Label, {TextColor3 = self.Theme.TextPrimary}, 0.2)
    if tab.IconImage then
        Utility:Tween(tab.IconImage, {ImageColor3 = self.Theme.Primary}, 0.2)
    end

    Utility:AddStroke(tab.Button, self.Theme.Primary, 1.5, 0.3)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ“¦ SECTION SYSTEM
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateSection(tab, name)
    local theme = self.Theme
    local section = {
        Name = name,
        Elements = {}
    }

    section.Container = Utility:Create("Frame", {
        Name = "Section_" .. name,
        Size = UDim2.new(1, 0, 0, 0),
        AutomaticSize = Enum.AutomaticSize.Y,
        BackgroundColor3 = theme.BgSecondary,
        BorderSizePixel = 0,
        ZIndex = 4,
        Parent = tab.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = theme.CornerRadius,
        Parent = section.Container
    })

    Utility:AddStroke(section.Container, theme.BorderSubtle, 1, 0.8)

    section.Header = Utility:Create("TextLabel", {
        Name = "Header",
        Size = UDim2.new(1, -20, 0, 30),
        Position = UDim2.new(0, 10, 0, 5),
        BackgroundTransparency = 1,
        Text = name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.GothamBold,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 5,
        Parent = section.Container
    })

    section.Divider = Utility:Create("Frame", {
        Name = "Divider",
        Size = UDim2.new(1, -20, 0, 1),
        Position = UDim2.new(0, 10, 0, 38),
        BackgroundColor3 = theme.Divider,
        BorderSizePixel = 0,
        ZIndex = 5,
        Parent = section.Container
    })

    section.Content = Utility:Create("Frame", {
        Name = "Content",
        Size = UDim2.new(1, -20, 0, 0),
        Position = UDim2.new(0, 10, 0, 45),
        AutomaticSize = Enum.AutomaticSize.Y,
        BackgroundTransparency = 1,
        ZIndex = 5,
        Parent = section.Container
    })

    Utility:Create("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 8),
        Parent = section.Content
    })

    Utility:Create("UIPadding", {
        PaddingBottom = UDim.new(0, 10),
        Parent = section.Content
    })

    section.CreateToggle = function(_, config)
        return self:_CreateToggle(section, config)
    end

    section.CreateButton = function(_, config)
        return self:_CreateButton(section, config)
    end

    section.CreateSlider = function(_, config)
        return self:_CreateSlider(section, config)
    end

    section.CreateDropdown = function(_, config)
        return self:_CreateDropdown(section, config)
    end

    section.CreateInput = function(_, config)
        return self:_CreateInput(section, config)
    end

    section.CreateKeybind = function(_, config)
        return self:_CreateKeybind(section, config)
    end

    section.CreateColorPicker = function(_, config)
        return self:_CreateColorPicker(section, config)
    end

    section.CreateLabel = function(_, text)
        return self:_CreateLabel(section, text)
    end

    table.insert(tab.Sections, section)
    return section
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: TOGGLE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateToggle(section, config)
    local theme = self.Theme
    local toggle = {
        Name = config.Name or "Toggle",
        Default = config.Default or false,
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Default or false
    }

    toggle.Container = Utility:Create("Frame", {
        Name = "Toggle_" .. toggle.Name,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = toggle.Container
    })

    toggle.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -60, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = toggle.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7,
        Parent = toggle.Container
    })

    toggle.SwitchBg = Utility:Create("Frame", {
        Name = "SwitchBg",
        Size = UDim2.new(0, 45, 0, 22),
        Position = UDim2.new(1, -50, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundColor3 = toggle.Value and theme.Success or theme.BgElevated,
        BorderSizePixel = 0,
        ZIndex = 7,
        Parent = toggle.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = toggle.SwitchBg
    })

    Utility:AddStroke(toggle.SwitchBg, theme.Border, 1, 0.7)

    toggle.Knob = Utility:Create("Frame", {
        Name = "Knob",
        Size = UDim2.new(0, 18, 0, 18),
        Position = toggle.Value and UDim2.new(1, -20, 0.5, 0) or UDim2.new(0, 2, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundColor3 = Color3.fromRGB(255, 255, 255),
        BorderSizePixel = 0,
        ZIndex = 8,
        Parent = toggle.SwitchBg
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = toggle.Knob
    })

    Utility:AddShadow(toggle.Knob, theme.Shadow, 5, 0.5)

    function toggle:SetValue(value, skipCallback)
        toggle.Value = value

        Utility:Tween(toggle.SwitchBg, {
            BackgroundColor3 = value and theme.Success or theme.BgElevated
        }, 0.3)

        Utility:Tween(toggle.Knob, {
            Position = value and UDim2.new(1, -20, 0.5, 0) or UDim2.new(0, 2, 0.5, 0)
        }, 0.3, Enum.EasingStyle.Quint)

        if toggle.Flag then
            Library.Flags[toggle.Flag] = value
        end

        if not skipCallback then
            pcall(toggle.Callback, value)
        end
    end

    toggle.Container.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            Utility:RippleEffect(toggle.Container, theme.Primary)
            toggle:SetValue(not toggle.Value)
        end
    end)

    toggle.Container.MouseEnter:Connect(function()
        Utility:Tween(toggle.Container, {BackgroundTransparency = 0.3}, 0.2)
    end)

    toggle.Container.MouseLeave:Connect(function()
        Utility:Tween(toggle.Container, {BackgroundTransparency = 0.5}, 0.2)
    end)

    function toggle:AddTooltip(text)
        local tooltip = Utility:Create("Frame", {
            Name = "Tooltip",
            Size = UDim2.new(0, 0, 0, 25),
            Position = UDim2.new(0.5, 0, 0, -30),
            AnchorPoint = Vector2.new(0.5, 1),
            BackgroundColor3 = theme.BgModal,
            BorderSizePixel = 0,
            Visible = false,
            ZIndex = 15,
            Parent = toggle.Container
        })

        Utility:Create("UICorner", {
            CornerRadius = UDim.new(0, 4),
            Parent = tooltip
        })

        Utility:AddStroke(tooltip, theme.Primary, 1, 0.5)

        local tooltipLabel = Utility:Create("TextLabel", {
            Size = UDim2.new(1, -10, 1, 0),
            Position = UDim2.new(0, 5, 0, 0),
            BackgroundTransparency = 1,
            Text = text,
            TextColor3 = theme.TextPrimary,
            TextSize = theme.FontSizes.Small,
            Font = Enum.Font.Gotham,
            ZIndex = 16,
            Parent = tooltip
        })

        local textSize = Utility:GetTextSize(text, theme.FontSizes.Small, Enum.Font.Gotham, Vector2.new(200, 25))
        tooltip.Size = UDim2.new(0, textSize.X + 15, 0, 25)

        toggle.Container.MouseEnter:Connect(function()
            tooltip.Visible = true
            Utility:Tween(tooltip, {BackgroundTransparency = 0}, 0.2)
        end)

        toggle.Container.MouseLeave:Connect(function()
            tooltip.Visible = false
        end)

        return toggle
    end

    if toggle.Flag then
        Library.Flags[toggle.Flag] = toggle.Value
        self.Elements[toggle.Flag] = toggle
    end

    toggle:SetValue(toggle.Default, true)

    return toggle
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: BUTTON
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateButton(section, config)
    local theme = self.Theme
    local button = {
        Name = config.Name or "Button",
        Callback = config.Callback or function() end,
        Variant = config.Variant or "Primary"
    }

    local variantColors = {
        Primary = theme.Primary,
        Secondary = theme.Secondary,
        Danger = theme.Danger,
        Ghost = theme.BgTertiary
    }

    button.Container = Utility:Create("TextButton", {
        Name = "Button_" .. button.Name,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundColor3 = variantColors[button.Variant],
        BackgroundTransparency = button.Variant == "Ghost" and 0.3 or 0,
        BorderSizePixel = 0,
        Text = "",
        AutoButtonColor = false,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = button.Container
    })

    if button.Variant ~= "Ghost" then
        Utility:AddShadow(button.Container, variantColors[button.Variant], 10, 0.6)
    end

    button.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -20, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = button.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.GothamBold,
        ZIndex = 7,
        Parent = button.Container
    })

    button.Container.MouseButton1Click:Connect(function()
        Utility:RippleEffect(button.Container, Color3.fromRGB(255, 255, 255))
        pcall(button.Callback)
    end)

    button.Container.MouseEnter:Connect(function()
        Utility:Tween(button.Container, {Size = UDim2.new(1, 0, 0, 37)}, 0.2, Enum.EasingStyle.Quint)

        if button.Variant == "Ghost" then
            Utility:Tween(button.Container, {BackgroundTransparency = 0}, 0.2)
        else
            Utility:Tween(button.Container, {
                BackgroundColor3 = Color3.fromRGB(
                    math.min(255, variantColors[button.Variant].R * 255 + 20),
                    math.min(255, variantColors[button.Variant].G * 255 + 20),
                    math.min(255, variantColors[button.Variant].B * 255 + 20)
                )
            }, 0.2)
        end
    end)

    button.Container.MouseLeave:Connect(function()
        Utility:Tween(button.Container, {Size = UDim2.new(1, 0, 0, 35)}, 0.2, Enum.EasingStyle.Quint)

        if button.Variant == "Ghost" then
            Utility:Tween(button.Container, {BackgroundTransparency = 0.3}, 0.2)
        else
            Utility:Tween(button.Container, {BackgroundColor3 = variantColors[button.Variant]}, 0.2)
        end
    end)

    return button
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: SLIDER
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateSlider(section, config)
    local theme = self.Theme
    local slider = {
        Name = config.Name or "Slider",
        Min = config.Min or 0,
        Max = config.Max or 100,
        Default = config.Default or 50,
        Increment = config.Increment or 1,
        Suffix = config.Suffix or "",
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Default or 50
    }

    slider.Container = Utility:Create("Frame", {
        Name = "Slider_" .. slider.Name,
        Size = UDim2.new(1, 0, 0, 50),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = slider.Container
    })

    slider.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(0.6, 0, 0, 20),
        Position = UDim2.new(0, 10, 0, 5),
        BackgroundTransparency = 1,
        Text = slider.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7,
        Parent = slider.Container
    })

    slider.ValueLabel = Utility:Create("TextLabel", {
        Name = "ValueLabel",
        Size = UDim2.new(0.4, -10, 0, 20),
        Position = UDim2.new(0.6, 0, 0, 5),
        BackgroundTransparency = 1,
        Text = tostring(slider.Value) .. slider.Suffix,
        TextColor3 = theme.Primary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.GothamBold,
        TextXAlignment = Enum.TextXAlignment.Right,
        ZIndex = 7,
        Parent = slider.Container
    })

    slider.Track = Utility:Create("Frame", {
        Name = "Track",
        Size = UDim2.new(1, -20, 0, 6),
        Position = UDim2.new(0, 10, 1, -15),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        ZIndex = 7,
        Parent = slider.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = slider.Track
    })

    slider.Fill = Utility:Create("Frame", {
        Name = "Fill",
        Size = UDim2.new(0, 0, 1, 0),
        BackgroundColor3 = theme.Primary,
        BorderSizePixel = 0,
        ZIndex = 8,
        Parent = slider.Track
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = slider.Fill
    })

    Utility:AddGradient(slider.Fill, ColorSequence.new{
        ColorSequenceKeypoint.new(0, theme.Primary),
        ColorSequenceKeypoint.new(1, theme.Secondary)
    }, 90)

    slider.Knob = Utility:Create("Frame", {
        Name = "Knob",
        Size = UDim2.new(0, 16, 0, 16),
        Position = UDim2.new(0, 0, 0.5, 0),
        AnchorPoint = Vector2.new(0.5, 0.5),
        BackgroundColor3 = Color3.fromRGB(255, 255, 255),
        BorderSizePixel = 0,
        ZIndex = 9,
        Parent = slider.Track
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(1, 0),
        Parent = slider.Knob
    })

    Utility:AddShadow(slider.Knob, theme.Shadow, 8, 0.4)

    local function setVisual(percent)
        percent = math.clamp(percent, 0, 1)
        slider.Fill.Size = UDim2.new(percent, 0, 1, 0)
        slider.Knob.Position = UDim2.new(percent, 0, 0.5, 0)
    end

    function slider:SetValue(value, skipCallback)
        value = math.clamp(value, slider.Min, slider.Max)
        value = math.floor((value / slider.Increment) + 0.5) * slider.Increment
        slider.Value = value

        local percent = (value - slider.Min) / (slider.Max - slider.Min)
        setVisual(percent)

        slider.ValueLabel.Text = tostring(value) .. slider.Suffix

        if slider.Flag then
            Library.Flags[slider.Flag] = value
        end

        if not skipCallback then
            pcall(slider.Callback, value)
        end
    end

    local dragging = false

    slider.Track.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            Utility:Tween(slider.Knob, {Size = UDim2.new(0, 20, 0, 20)}, 0.2, Enum.EasingStyle.Back)
        end
    end)

    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
            Utility:Tween(slider.Knob, {Size = UDim2.new(0, 16, 0, 16)}, 0.2, Enum.EasingStyle.Quint)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local percent = math.clamp((Mouse.X - slider.Track.AbsolutePosition.X) / slider.Track.AbsoluteSize.X, 0, 1)
            local value = slider.Min + (slider.Max - slider.Min) * percent
            slider:SetValue(value)
        end
    end)

    if slider.Flag then
        Library.Flags[slider.Flag] = slider.Value
        self.Elements[slider.Flag] = slider
    end

    slider:SetValue(slider.Default, true)

    return slider
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: DROPDOWN
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateDropdown(section, config)
    local theme = self.Theme
    local dropdown = {
        Name = config.Name or "Dropdown",
        Options = config.Options or {},
        Default = config.Default or (config.Options and config.Options[1]) or "",
        Multi = config.Multi or false,
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Multi and {} or (config.Default or ""),
        IsOpen = false
    }

    dropdown.Container = Utility:Create("Frame", {
        Name = "Dropdown_" .. dropdown.Name,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = dropdown.Container
    })

    dropdown.Header = Utility:Create("TextButton", {
        Name = "Header",
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundTransparency = 1,
        Text = "",
        ZIndex = 7,
        Parent = dropdown.Container
    })

    dropdown.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -60, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = dropdown.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 8,
        Parent = dropdown.Header
    })

    dropdown.ValueLabel = Utility:Create("TextLabel", {
        Name = "ValueLabel",
        Size = UDim2.new(0, 100, 1, 0),
        Position = UDim2.new(1, -130, 0, 0),
        BackgroundTransparency = 1,
        Text = dropdown.Multi and "Multiple" or tostring(dropdown.Value),
        TextColor3 = theme.TextSecondary,
        TextSize = theme.FontSizes.Small,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Right,
        TextTruncate = Enum.TextTruncate.AtEnd,
        ZIndex = 8,
        Parent = dropdown.Header
    })

    dropdown.Arrow = Utility:Create("TextLabel", {
        Name = "Arrow",
        Size = UDim2.new(0, 20, 0, 20),
        Position = UDim2.new(1, -25, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundTransparency = 1,
        Text = "â–¼",
        TextColor3 = theme.TextSecondary,
        TextSize = 10,
        Font = Enum.Font.Gotham,
        ZIndex = 8,
        Parent = dropdown.Header
    })

    dropdown.OptionsList = Utility:Create("ScrollingFrame", {
        Name = "OptionsList",
        Size = UDim2.new(1, 0, 0, 0),
        Position = UDim2.new(0, 0, 1, 5),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        ScrollBarThickness = 4,
        ScrollBarImageColor3 = theme.Primary,
        CanvasSize = UDim2.new(0, 0, 0, 0),
        AutomaticCanvasSize = Enum.AutomaticSize.Y,
        Visible = false,
        ZIndex = 100,
        Parent = dropdown.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = dropdown.OptionsList
    })

    Utility:AddStroke(dropdown.OptionsList, theme.Border, 1, 0.6)
    Utility:AddShadow(dropdown.OptionsList, theme.Shadow, 15, 0.5)

    Utility:Create("UIListLayout", {
        SortOrder = Enum.SortOrder.LayoutOrder,
        Padding = UDim.new(0, 2),
        Parent = dropdown.OptionsList
    })

    Utility:Create("UIPadding", {
        PaddingTop = UDim.new(0, 5),
        PaddingBottom = UDim.new(0, 5),
        PaddingLeft = UDim.new(0, 5),
        PaddingRight = UDim.new(0, 5),
        Parent = dropdown.OptionsList
    })

    function dropdown:Toggle()
        dropdown.IsOpen = not dropdown.IsOpen

        if dropdown.IsOpen then
            dropdown.OptionsList.Visible = true
            local listHeight = math.min(#dropdown.Options * 30 + 10, 150)

            Utility:Tween(dropdown.Container, {
                Size = UDim2.new(1, 0, 0, 35 + listHeight + 5)
            }, 0.3, Enum.EasingStyle.Quint)

            Utility:Tween(dropdown.OptionsList, {
                Size = UDim2.new(1, 0, 0, listHeight)
            }, 0.3, Enum.EasingStyle.Quint)

            Utility:Tween(dropdown.Arrow, {Rotation = 180}, 0.3, Enum.EasingStyle.Quint)
        else
            Utility:Tween(dropdown.Container, {
                Size = UDim2.new(1, 0, 0, 35)
            }, 0.3, Enum.EasingStyle.Quint)

            Utility:Tween(dropdown.OptionsList, {
                Size = UDim2.new(1, 0, 0, 0)
            }, 0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out, function()
                dropdown.OptionsList.Visible = false
            end)

            Utility:Tween(dropdown.Arrow, {Rotation = 0}, 0.3, Enum.EasingStyle.Quint)
        end
    end

    function dropdown:SetValue(value, skipCallback)
        if dropdown.Multi then
            local idx = table.find(dropdown.Value, value)
            if idx then
                table.remove(dropdown.Value, idx)
            else
                table.insert(dropdown.Value, value)
            end
            dropdown.ValueLabel.Text = (#dropdown.Value > 0) and (table.concat(dropdown.Value, ", ")) or "None"
        else
            dropdown.Value = value
            dropdown.ValueLabel.Text = tostring(value)
            dropdown:Toggle()
        end

        if dropdown.Flag then
            Library.Flags[dropdown.Flag] = dropdown.Value
        end

        if not skipCallback then
            pcall(dropdown.Callback, dropdown.Value)
        end
    end

    for _, option in ipairs(dropdown.Options) do
        local optionButton = Utility:Create("TextButton", {
            Name = "Option_" .. option,
            Size = UDim2.new(1, -10, 0, 25),
            BackgroundColor3 = theme.BgTertiary,
            BackgroundTransparency = 0.5,
            BorderSizePixel = 0,
            Text = "",
            ZIndex = 11,
            Parent = dropdown.OptionsList
        })

        Utility:Create("UICorner", {
            CornerRadius = UDim.new(0, 4),
            Parent = optionButton
        })

        local optionLabel = Utility:Create("TextLabel", {
            Size = UDim2.new(1, -10, 1, 0),
            Position = UDim2.new(0, 5, 0, 0),
            BackgroundTransparency = 1,
            Text = option,
            TextColor3 = theme.TextPrimary,
            TextSize = theme.FontSizes.Small,
            Font = Enum.Font.Gotham,
            TextXAlignment = Enum.TextXAlignment.Left,
            ZIndex = 12,
            Parent = optionButton
        })

        optionButton.MouseButton1Click:Connect(function()
            dropdown:SetValue(option)
            Utility:RippleEffect(optionButton, theme.Primary)
        end)

        optionButton.MouseEnter:Connect(function()
            Utility:Tween(optionButton, {BackgroundTransparency = 0}, 0.2)
        end)

        optionButton.MouseLeave:Connect(function()
            Utility:Tween(optionButton, {BackgroundTransparency = 0.5}, 0.2)
        end)
    end

    dropdown.Header.MouseButton1Click:Connect(function()
        dropdown:Toggle()
    end)

    dropdown.Header.MouseEnter:Connect(function()
        Utility:Tween(dropdown.Container, {BackgroundTransparency = 0.3}, 0.2)
    end)

    dropdown.Header.MouseLeave:Connect(function()
        Utility:Tween(dropdown.Container, {BackgroundTransparency = 0.5}, 0.2)
    end)

    if dropdown.Flag then
        Library.Flags[dropdown.Flag] = dropdown.Value
        self.Elements[dropdown.Flag] = dropdown
    end

    if not dropdown.Multi and dropdown.Default then
        dropdown:SetValue(dropdown.Default, true)
    end

    return dropdown
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: INPUT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateInput(section, config)
    local theme = self.Theme
    local input = {
        Name = config.Name or "Input",
        Default = config.Default or "",
        Placeholder = config.Placeholder or "Enter text...",
        Numeric = config.Numeric or false,
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Default or ""
    }

    input.Container = Utility:Create("Frame", {
        Name = "Input_" .. input.Name,
        Size = UDim2.new(1, 0, 0, 60),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = input.Container
    })

    input.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -20, 0, 20),
        Position = UDim2.new(0, 10, 0, 5),
        BackgroundTransparency = 1,
        Text = input.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7,
        Parent = input.Container
    })

    input.Box = Utility:Create("TextBox", {
        Name = "Box",
        Size = UDim2.new(1, -20, 0, 28),
        Position = UDim2.new(0, 10, 1, -33),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        PlaceholderText = input.Placeholder,
        PlaceholderColor3 = theme.TextMuted,
        Text = input.Value,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Small,
        Font = Enum.Font.Gotham,
        ClearTextOnFocus = false,
        ZIndex = 7,
        Parent = input.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = input.Box
    })

    Utility:AddStroke(input.Box, theme.Border, 1, 0.7)

    Utility:Create("UIPadding", {
        PaddingLeft = UDim.new(0, 8),
        PaddingRight = UDim.new(0, 8),
        Parent = input.Box
    })

    function input:SetValue(value, skipCallback)
        if input.Numeric then
            value = tonumber(value) or 0
        end
        input.Value = value
        input.Box.Text = tostring(value)

        if input.Flag then
            Library.Flags[input.Flag] = value
        end

        if not skipCallback then
            pcall(input.Callback, value)
        end
    end

    input.Box.Focused:Connect(function()
        Utility:Tween(input.Box, {BackgroundColor3 = theme.BgSecondary}, 0.2)
        for _, stroke in ipairs(input.Box:GetChildren()) do
            if stroke:IsA("UIStroke") then
                Utility:Tween(stroke, {Color = theme.Primary, Transparency = 0.3}, 0.2)
            end
        end
    end)

    input.Box.FocusLost:Connect(function(enterPressed)
        Utility:Tween(input.Box, {BackgroundColor3 = theme.BgElevated}, 0.2)
        for _, stroke in ipairs(input.Box:GetChildren()) do
            if stroke:IsA("UIStroke") then
                Utility:Tween(stroke, {Color = theme.Border, Transparency = 0.7}, 0.2)
            end
        end

        if enterPressed then
            input:SetValue(input.Box.Text)
        end
    end)

    if input.Flag then
        Library.Flags[input.Flag] = input.Value
        self.Elements[input.Flag] = input
    end

    return input
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: KEYBIND
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateKeybind(section, config)
    local theme = self.Theme
    local keybind = {
        Name = config.Name or "Keybind",
        Default = config.Default or Enum.KeyCode.Unknown,
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Default or Enum.KeyCode.Unknown,
        Listening = false
    }

    keybind.Container = Utility:Create("Frame", {
        Name = "Keybind_" .. keybind.Name,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = keybind.Container
    })

    keybind.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -100, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = keybind.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7,
        Parent = keybind.Container
    })

    keybind.Button = Utility:Create("TextButton", {
        Name = "Button",
        Size = UDim2.new(0, 80, 0, 25),
        Position = UDim2.new(1, -85, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        Text = keybind.Value.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Small,
        Font = Enum.Font.Gotham,
        ZIndex = 7,
        Parent = keybind.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = keybind.Button
    })

    Utility:AddStroke(keybind.Button, theme.Border, 1, 0.7)

    function keybind:SetValue(keyCode, skipCallback)
        keybind.Value = keyCode
        keybind.Button.Text = keyCode.Name

        if keybind.Flag then
            Library.Flags[keybind.Flag] = keyCode
        end

        if not skipCallback then
            pcall(keybind.Callback, keyCode)
        end
    end

    keybind.Button.MouseButton1Click:Connect(function()
        keybind.Listening = true
        keybind.Button.Text = "..."
        Utility:Tween(keybind.Button, {BackgroundColor3 = theme.Primary}, 0.2)
    end)

    UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if keybind.Listening and not gameProcessed then
            if input.UserInputType == Enum.UserInputType.Keyboard then
                keybind:SetValue(input.KeyCode)
                keybind.Listening = false
                Utility:Tween(keybind.Button, {BackgroundColor3 = theme.BgElevated}, 0.2)
            end
        end
    end)

    keybind.Button.MouseEnter:Connect(function()
        if not keybind.Listening then
            Utility:Tween(keybind.Button, {BackgroundColor3 = theme.BgSecondary}, 0.2)
        end
    end)

    keybind.Button.MouseLeave:Connect(function()
        if not keybind.Listening then
            Utility:Tween(keybind.Button, {BackgroundColor3 = theme.BgElevated}, 0.2)
        end
    end)

    if keybind.Flag then
        Library.Flags[keybind.Flag] = keybind.Value
        self.Elements[keybind.Flag] = keybind
    end

    return keybind
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: COLOR PICKER
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateColorPicker(section, config)
    local theme = self.Theme
    local colorPicker = {
        Name = config.Name or "Color Picker",
        Default = config.Default or Color3.fromRGB(255, 255, 255),
        Flag = config.Flag,
        Callback = config.Callback or function() end,
        Value = config.Default or Color3.fromRGB(255, 255, 255),
        IsOpen = false
    }

    colorPicker.Container = Utility:Create("Frame", {
        Name = "ColorPicker_" .. colorPicker.Name,
        Size = UDim2.new(1, 0, 0, 35),
        BackgroundColor3 = theme.BgTertiary,
        BackgroundTransparency = 0.5,
        BorderSizePixel = 0,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = colorPicker.Container
    })

    colorPicker.Label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, -60, 1, 0),
        Position = UDim2.new(0, 10, 0, 0),
        BackgroundTransparency = 1,
        Text = colorPicker.Name,
        TextColor3 = theme.TextPrimary,
        TextSize = theme.FontSizes.Body,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        ZIndex = 7,
        Parent = colorPicker.Container
    })

    colorPicker.Preview = Utility:Create("TextButton", {
        Name = "Preview",
        Size = UDim2.new(0, 40, 0, 25),
        Position = UDim2.new(1, -45, 0.5, 0),
        AnchorPoint = Vector2.new(0, 0.5),
        BackgroundColor3 = colorPicker.Value,
        BorderSizePixel = 0,
        Text = "",
        ZIndex = 7,
        Parent = colorPicker.Container
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 4),
        Parent = colorPicker.Preview
    })

    Utility:AddStroke(colorPicker.Preview, theme.Border, 1, 0.7)

    colorPicker.Panel = Utility:Create("Frame", {
        Name = "Panel",
        Size = UDim2.new(0, 200, 0, 0),
        Position = UDim2.new(1, -205, 1, 5),
        BackgroundColor3 = theme.BgElevated,
        BorderSizePixel = 0,
        Visible = false,
        ClipsDescendants = true,
        ZIndex = 1000,
        Parent = self.ScreenGui
    })

    Utility:Create("UICorner", {
        CornerRadius = UDim.new(0, 6),
        Parent = colorPicker.Panel
    })

    Utility:AddStroke(colorPicker.Panel, theme.Border, 1, 0.6)
    Utility:AddShadow(colorPicker.Panel, theme.Shadow, 15, 0.5)

    local rgbSliders = {}
    local colors = {"R", "G", "B"}
    local rgbValues = {R = 255, G = 255, B = 255}

    for i, color in ipairs(colors) do
        local sliderFrame = Utility:Create("Frame", {
            Size = UDim2.new(1, -20, 0, 35),
            Position = UDim2.new(0, 10, 0, 10 + (i - 1) * 40),
            BackgroundTransparency = 1,
            ZIndex = 11,
            Parent = colorPicker.Panel
        })

        local label = Utility:Create("TextLabel", {
            Size = UDim2.new(0, 15, 0, 15),
            Position = UDim2.new(0, 0, 0, 0),
            BackgroundTransparency = 1,
            Text = color,
            TextColor3 = theme.TextPrimary,
            TextSize = theme.FontSizes.Small,
            Font = Enum.Font.GothamBold,
            ZIndex = 12,
            Parent = sliderFrame
        })

        local inputBox = Utility:Create("TextBox", {
            Size = UDim2.new(0, 40, 0, 18),
            Position = UDim2.new(1, -40, 0, 0),
            BackgroundColor3 = theme.BgSecondary,
            BorderSizePixel = 0,
            Text = tostring(rgbValues[color]),
            TextColor3 = theme.TextPrimary,
            TextSize = theme.FontSizes.Small,
            Font = Enum.Font.Gotham,
            ZIndex = 12,
            Parent = sliderFrame
        })

        Utility:Create("UICorner", {
            CornerRadius = UDim.new(0, 3),
            Parent = inputBox
        })

        Utility:AddStroke(inputBox, theme.Border, 1, 0.7)

        local rgbTrack = Utility:Create("Frame", {
            Size = UDim2.new(1, -55, 0, 5),
            Position = UDim2.new(0, 20, 1, -13),
            BackgroundColor3 = theme.BgSecondary,
            BorderSizePixel = 0,
            ZIndex = 11,
            Parent = sliderFrame
        })

        Utility:Create("UICorner", {
            CornerRadius = UDim.new(1, 0),
            Parent = rgbTrack
        })

        local rgbFill = Utility:Create("Frame", {
            Size = UDim2.new((rgbValues[color] / 255), 0, 1, 0),
            BackgroundColor3 = (color == "R" and Color3.fromRGB(255, 0, 0)) or (color == "G" and Color3.fromRGB(0, 255, 0) or Color3.fromRGB(0, 0, 255)),
            BorderSizePixel = 0,
            ZIndex = 12,
            Parent = rgbTrack
        })

        Utility:Create("UICorner", {
            CornerRadius = UDim.new(1, 0),
            Parent = rgbFill
        })

        rgbSliders[color] = {Frame = sliderFrame, InputBox = inputBox, Fill = rgbFill, Track = rgbTrack}
    end

    local function updateColorFromRGB()
        local r = math.clamp(tonumber(rgbSliders["R"].InputBox.Text) or 255, 0, 255)
        local g = math.clamp(tonumber(rgbSliders["G"].InputBox.Text) or 255, 0, 255)
        local b = math.clamp(tonumber(rgbSliders["B"].InputBox.Text) or 255, 0, 255)

        colorPicker:SetValue(Color3.fromRGB(r, g, b))
    end

    for _, color in ipairs(colors) do
        rgbSliders[color].InputBox.FocusLost:Connect(function()
            local value = tonumber(rgbSliders[color].InputBox.Text) or 0
            value = math.clamp(value, 0, 255)
            rgbSliders[color].InputBox.Text = tostring(value)
            rgbValues[color] = value
            rgbSliders[color].Fill.Size = UDim2.new((value / 255), 0, 1, 0)
            updateColorFromRGB()
        end)

        rgbSliders[color].InputBox.Changed:Connect(function()
            local value = tonumber(rgbSliders[color].InputBox.Text) or 0
            if value >= 0 and value <= 255 then
                rgbSliders[color].Fill.Size = UDim2.new((value / 255), 0, 1, 0)
            end
        end)

        rgbSliders[color].Track.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                local percent = math.clamp((Mouse.X - rgbSliders[color].Track.AbsolutePosition.X) / rgbSliders[color].Track.AbsoluteSize.X, 0, 1)
                local value = math.floor(percent * 255)
                rgbSliders[color].InputBox.Text = tostring(value)
                rgbValues[color] = value
                rgbSliders[color].Fill.Size = UDim2.new(percent, 0, 1, 0)
                updateColorFromRGB()
            end
        end)
    end

    function colorPicker:Toggle()
        colorPicker.IsOpen = not colorPicker.IsOpen

        if colorPicker.IsOpen then
            colorPicker.Panel.Visible = true
            Utility:Tween(colorPicker.Panel, {Size = UDim2.new(0, 200, 0, 120)}, 0.3, Enum.EasingStyle.Quint)
        else
            Utility:Tween(colorPicker.Panel, {Size = UDim2.new(0, 200, 0, 0)}, 0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out, function()
                colorPicker.Panel.Visible = false
            end)
        end
    end

    function colorPicker:SetValue(color, skipCallback)
        colorPicker.Value = color
        colorPicker.Preview.BackgroundColor3 = color

        rgbSliders["R"].InputBox.Text = tostring(math.floor(color.R * 255))
        rgbSliders["G"].InputBox.Text = tostring(math.floor(color.G * 255))
        rgbSliders["B"].InputBox.Text = tostring(math.floor(color.B * 255))

        rgbSliders["R"].Fill.Size = UDim2.new(color.R, 0, 1, 0)
        rgbSliders["G"].Fill.Size = UDim2.new(color.G, 0, 1, 0)
        rgbSliders["B"].Fill.Size = UDim2.new(color.B, 0, 1, 0)

        if colorPicker.Flag then
            Library.Flags[colorPicker.Flag] = color
        end

        if not skipCallback then
            pcall(colorPicker.Callback, color)
        end
    end

    colorPicker.Preview.MouseButton1Click:Connect(function()
        colorPicker:Toggle()
    end)

    colorPicker.Preview.MouseEnter:Connect(function()
        Utility:Tween(colorPicker.Preview, {Size = UDim2.new(0, 43, 0, 28)}, 0.2, Enum.EasingStyle.Quint)
    end)

    colorPicker.Preview.MouseLeave:Connect(function()
        Utility:Tween(colorPicker.Preview, {Size = UDim2.new(0, 40, 0, 25)}, 0.2, Enum.EasingStyle.Quint)
    end)

    if colorPicker.Flag then
        Library.Flags[colorPicker.Flag] = colorPicker.Value
        self.Elements[colorPicker.Flag] = colorPicker
    end

    colorPicker:SetValue(colorPicker.Default, true)

    return colorPicker
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- ğŸ›ï¸ COMPONENTS: LABEL
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Library:_CreateLabel(section, text)
    local theme = self.Theme

    local label = Utility:Create("TextLabel", {
        Name = "Label",
        Size = UDim2.new(1, 0, 0, 25),
        BackgroundTransparency = 1,
        Text = text,
        TextColor3 = theme.TextSecondary,
        TextSize = theme.FontSizes.Small,
        Font = Enum.Font.Gotham,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextWrapped = true,
        ZIndex = 6,
        Parent = section.Content
    })

    Utility:Create("UIPadding", {
        PaddingLeft = UDim.new(0, 10),
        PaddingRight = UDim.new(0, 10),
        Parent = label
    })

    return label
end

return Library
